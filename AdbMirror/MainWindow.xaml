<Window x:Class="AdbMirror.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Phone Mirror"
        Height="460"
        Width="760"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResize"
        MinHeight="380"
        MinWidth="640"
        Background="{DynamicResource LabBackgroundBrush}">
    <Grid Background="{DynamicResource LabBackgroundBrush}">
        <Grid.ColumnDefinitions>
            <!-- Left rail: status + logs -->
            <ColumnDefinition Width="2.2*" />
            <!-- Right rail: primary controls -->
            <ColumnDefinition Width="1.4*" />
        </Grid.ColumnDefinitions>

        <!-- LEFT: Status + logs -->
        <Border Grid.Column="0"
                Margin="24,24,16,24"
                Style="{StaticResource LabCardBorder}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="8" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <!-- Header -->
                <DockPanel Grid.Row="0" LastChildFill="False" Margin="0,0,0,12">
                    <StackPanel Orientation="Vertical" DockPanel.Dock="Left" VerticalAlignment="Top">
                        <TextBlock Text="Phone Mirror"
                                   Style="{StaticResource LabHeadingTextBlock}"
                                   Margin="0" />
                        <TextBlock Text="Live ADB mirroring"
                                   FontSize="11"
                                   Foreground="{StaticResource LabTextSecondaryBrush}"
                                   Margin="0" />
                    </StackPanel>
                </DockPanel>

                <!-- Status line -->
                <StackPanel Grid.Row="1"
                            Orientation="Horizontal"
                            Margin="0,0,0,4">
                    <TextBlock Text="STATUS"
                               Style="{StaticResource LabLabelTextBlock}"
                               Margin="0,0,8,0" />
                    <TextBlock Text="{Binding StatusText}"
                               Style="{StaticResource LabBodyTextBlock}"
                               MaxWidth="360" />
                </StackPanel>

                <!-- ADB path info -->
                <StackPanel Grid.Row="2"
                            Orientation="Horizontal"
                            Margin="0,0,0,4">
                    <TextBlock Text="ADB"
                               Style="{StaticResource LabLabelTextBlock}"
                               Margin="0,0,8,0" />
                    <TextBlock Text="{Binding AdbPathText}"
                               FontSize="10"
                               Foreground="{StaticResource LabTextSecondaryBrush}"
                               TextWrapping="Wrap"
                               MaxWidth="380" />
                </StackPanel>

                <!-- Logs -->
                <Border Grid.Row="4"
                        Margin="0,4,0,0"
                        Padding="8"
                        Background="{StaticResource LabSurfaceBrush}"
                        BorderBrush="{StaticResource LabBorderSecondaryBrush}"
                        BorderThickness="1"
                        CornerRadius="4">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>

                        <DockPanel Grid.Row="0" Margin="0,0,0,4">
                            <TextBlock Text="EVENT LOG"
                                       Style="{StaticResource LabLabelTextBlock}"
                                       DockPanel.Dock="Left" />
                            <Button Content="&#xE74E;"
                                    FontFamily="Segoe MDL2 Assets"
                                    FontSize="12"
                                    Width="24"
                                    Height="24"
                                    Margin="4,0,0,0"
                                    HorizontalAlignment="Right"
                                    Command="{Binding CopyLogsCommand}"
                                    ToolTip="Copy logs"
                                    Background="Transparent"
                                    BorderBrush="{StaticResource LabBorderSecondaryBrush}"
                                    Foreground="{StaticResource LabTextPrimaryBrush}"
                                    Cursor="Hand" />
                        </DockPanel>

                        <ScrollViewer Grid.Row="1"
                                      VerticalScrollBarVisibility="Auto">
                            <TextBlock Text="{Binding Logs, Mode=OneWay}"
                                       FontFamily="Consolas"
                                       FontSize="10"
                                       Foreground="{StaticResource LabStatusSuccessBrush}"
                                       TextWrapping="Wrap" />
                        </ScrollViewer>
                    </Grid>
                </Border>
            </Grid>
        </Border>

        <!-- RIGHT: Controls -->
        <Border Grid.Column="1"
                Margin="16,24,24,24"
                Style="{StaticResource LabCardBorder}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!-- Device summary -->
                <StackPanel Grid.Row="0"
                            Orientation="Horizontal"
                            Margin="0,0,0,16">
                    <TextBlock Text="&#xE753;"
                               FontFamily="Segoe MDL2 Assets"
                               FontSize="16"
                               Foreground="#FFFFFFFF"
                               Margin="0,0,6,0" />
                    <TextBlock Text="Connected device"
                               Style="{StaticResource LabBodyTextBlock}" />
                </StackPanel>

                <!-- Mirror button -->
                <Button Grid.Row="1"
                        Height="56"
                        Margin="0,0,0,16"
                        Padding="12,0"
                        Command="{Binding PrimaryCommand}"
                        IsEnabled="{Binding IsPrimaryEnabled}"
                        Style="{StaticResource LabPrimaryButton}">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <TextBlock Text="&#xE767;"
                                   FontFamily="Segoe MDL2 Assets"
                                   FontSize="16"
                                   Foreground="#FF000000"
                                   Margin="0,0,8,0" />
                        <TextBlock Text="{Binding PrimaryButtonText}"
                                   FontSize="18"
                                   FontWeight="SemiBold"
                                   Foreground="#FF000000" />
                    </StackPanel>
                </Button>

                <!-- Settings -->
                <StackPanel Grid.Row="2"
                            Orientation="Vertical">
                    <!-- Quality Preset -->
                    <StackPanel Orientation="Vertical"
                                Margin="0,0,0,16">
                        <TextBlock Text="QUALITY PRESET"
                                   Style="{StaticResource LabLabelTextBlock}"
                                   Margin="0,0,0,8" />
                        <ComboBox Width="160"
                                  ItemsSource="{Binding Presets}"
                                  SelectedItem="{Binding SelectedPreset}"
                                  Style="{StaticResource LabComboBox}" />
                    </StackPanel>
                    
                    <!-- Settings Options -->
                    <StackPanel Orientation="Vertical"
                                Margin="0,16,0,0">
                        <TextBlock Text="SETTINGS"
                                   Style="{StaticResource LabLabelTextBlock}"
                                   Margin="0,0,0,8" />
                        
                        <CheckBox Content="Auto mirror when device connects"
                                  IsChecked="{Binding AutoMirrorOnConnect}"
                                  Margin="0,0,0,8"
                                  Foreground="{StaticResource LabTextPrimaryBrush}" />
                        
                        <CheckBox Content="Start scrcpy in fullscreen"
                                  IsChecked="{Binding StartFullscreen}"
                                  Margin="0,0,0,8"
                                  Foreground="{StaticResource LabTextPrimaryBrush}" />
                        
                        <CheckBox Content="Keep screen awake"
                                  IsChecked="{Binding KeepScreenAwake}"
                                  Margin="0,0,0,0"
                                  Foreground="{StaticResource LabTextPrimaryBrush}" />
                    </StackPanel>
                </StackPanel>

                <!-- Credits with Logo -->
                <StackPanel Grid.Row="3"
                            Margin="0,16,0,0"
                            HorizontalAlignment="Right"
                            Orientation="Horizontal"
                            VerticalAlignment="Bottom">
                    <Image Source="Assets/logo.png"
                           Height="64"
                           Width="64"
                           Stretch="Uniform"
                           VerticalAlignment="Center"
                           Margin="0,0,12,0" />
                    <StackPanel Orientation="Vertical"
                                VerticalAlignment="Center">
                        <TextBlock FontSize="10"
                                   Foreground="{StaticResource LabTextSecondaryBrush}"
                                   Cursor="Hand">
                            <Hyperlink NavigateUri="https://labyrica.com"
                                       RequestNavigate="OnCreditsClick"
                                       Foreground="{StaticResource LabTextSecondaryBrush}">
                                Built by Labyrica â€” labyrica.com
                            </Hyperlink>
                        </TextBlock>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
